{"version":3,"sources":["pen-0.0.1.min.js"],"names":["a","Pen","b","valid","includes","length","match","action","c","selection","focusNode","parentNode","config","editor","textContent","getRangeAt","endOffset","innerHTML","slice","startOffset","execCommand","init","on","d","keyCode","which","e","getRange","f","startContainer","g","endContainer","h","i","j","nodeValue","k","preventDefault","prototype","markdown","window","TurndownService","arguments","hasOwnProperty","Array","join","B","indexOf","nodeName","toLowerCase","C","querySelector","D","options","_keep","_remove","blankRule","replacement","blankReplacement","keepReplacement","defaultRule","defaultReplacement","array","rules","push","filter","isArray","TypeError","call","element","isBlock","isVoid","isPre","firstChild","nodeType","l","data","replace","test","substr","m","nextSibling","removeChild","G","DOMParser","parseFromString","n","ActiveXObject","designMode","open","write","close","document","implementation","createHTMLDocument","o","p","getElementById","cloneNode","F","H","q","isCode","isBlank","r","flankingWhitespace","s","t","leading","trailing","previousSibling","u","E","headingStyle","hr","bulletListMarker","codeBlockStyle","fence","emDelimiter","strongDelimiter","linkStyle","linkReferenceStyle","br","outerHTML","v","I","childNodes","escape","x","z","w","forEach","append","forNode","trim","y","K","J","sort","A","paragraph","lineBreak","heading","Number","charAt","blockquote","list","lastElementChild","listItem","getAttribute","children","indentedCodeBlock","fencedCodeBlock","className","horizontalRule","inlineLink","title","referenceLink","L","references","emphasis","strong","code","image","alt","add","unshift","keep","remove","reduce","turndown","use","addRule","split","log","_range","selectNode","collapse","_menu","toString","linksInNewWindow","_toolbar","toolbar","querySelectorAll","titles","createElement","setAttribute","_inputBar","body","appendChild","delayExec","highlight","menu","style","display","target","isEmpty","classList","shiftKey","insertBefore","_inputActive","setTimeout","focus","value","whiteSpace","mailTo","http","onkeypress","checkContentChange","cleanContent","_events","_eventTargets","_eventsCache","addEventListener","apply","splice","removeEventListener","commonAncestorContainer","insertNode","setStartAfter","setEndBefore","setRange","notLink","tagName","links","createDocumentFragment","text","replaceChild","url","maxLength","prefix","hasChildNodes","Object","block","inline","source","insert","wrap","is","copy","console","clearTimeout","merge","debug","stay","stayMsg","textarea","cleanAttrs","cleanTags","Error","placeholder","change","_prevContent","getContent","input","addOnSubmitListener","form","setContent","rangeCount","createRange","selectNodeContents","removeAllRanges","addRange","replaceWith","removeAttribute","autoLink","isCollapsed","getBoundingClientRect","top","left","width","_stylesheet","height","head","sheet","clientWidth","clientHeight","cssRules","deleteRule","insertRule","onbeforeunload","_isDestroyed","destroy","rebuild","toMd","getSelection"],"mappings":"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","file":"pen-0.0.1.min.js","sourcesContent":["\"use strict\";!function(a){if(a.Pen){var b={};b.valid=function(a){return[\"#\",\"##\",\"###\",\"####\",\"#####\",\"######\"].includes(a)?\"h\"+a.length:\"```\"===a?\"codeblock\":\">\"===a?\"blockquote\":\"1.\"===a?\"insertorderedlist\":\"-\"===a||\"*\"===a?\"insertunorderedlist\":a.match(/^(?:\\.|\\*|\\-){3,}/)?\"inserthorizontalrule\":void 0},b.action=function(a,b){var c=a.selection.focusNode;c.parentNode!==a.config.editor&&(c.textContent.length===a.selection.getRangeAt(0).endOffset?c.parentNode.innerHTML=\"<br>\":c.textContent=c.textContent.slice(a.selection.getRangeAt(0).startOffset)),a.execCommand(b)},b.init=function(a){a.on(\"keypress\",function(c){var d=c.keyCode||c.which;if(32===d){var e=a.getRange(),f=e.startContainer,g=e.endContainer,h=e.startOffset,i=e.endOffset,j=a.selection.focusNode.nodeValue;if(f===g&&h===i&&j){var k=b.valid(j.slice(0,h));k&&(c.preventDefault(),b.action(a,k))}}})},a.Pen.prototype.markdown=b}}(window);var TurndownService=function(){function a(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a}function b(a,b){return Array(b+1).join(a)}function c(a){return-1!==B.indexOf(a.nodeName.toLowerCase())}function d(a){return-1!==C.indexOf(a.nodeName.toLowerCase())}function e(a){return a.querySelector&&a.querySelector(D)}function f(a){this.options=a,this._keep=[],this._remove=[],this.blankRule={replacement:a.blankReplacement},this.keepReplacement=a.keepReplacement,this.defaultRule={replacement:a.defaultReplacement},this.array=[];for(var b in a.rules)this.array.push(a.rules[b])}function g(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if(h(e,b,c))return e}return void 0}function h(a,b,c){var d=a.filter;if(\"string\"==typeof d){if(d===b.nodeName.toLowerCase())return!0}else if(Array.isArray(d)){if(d.indexOf(b.nodeName.toLowerCase())>-1)return!0}else{if(\"function\"!=typeof d)throw new TypeError(\"`filter` needs to be a string, array, or function\");if(d.call(a,b,c))return!0}}function i(a){var b=a.element,c=a.isBlock,d=a.isVoid,e=a.isPre||function(a){return\"PRE\"===a.nodeName};if(b.firstChild&&!e(b)){for(var f=null,g=!1,h=null,i=k(h,b,e);i!==b;){if(3===i.nodeType||4===i.nodeType){var l=i.data.replace(/[ \\r\\n\\t]+/g,\" \");if(f&&!/ $/.test(f.data)||g||\" \"!==l[0]||(l=l.substr(1)),!l){i=j(i);continue}i.data=l,f=i}else{if(1!==i.nodeType){i=j(i);continue}c(i)||\"BR\"===i.nodeName?(f&&(f.data=f.data.replace(/ $/,\"\")),f=null,g=!1):d(i)&&(f=null,g=!0)}var m=k(h,i,e);h=i,i=m}f&&(f.data=f.data.replace(/ $/,\"\"),f.data||j(f))}}function j(a){var b=a.nextSibling||a.parentNode;return a.parentNode.removeChild(a),b}function k(a,b,c){return a&&a.parentNode===b||c(b)?b.nextSibling||b.parentNode:b.firstChild||b.nextSibling||b.parentNode}function l(){var a=G.DOMParser,b=!1;try{(new a).parseFromString(\"\",\"text/html\")&&(b=!0)}catch(c){}return b}function m(){var a=function(){};return n()?a.prototype.parseFromString=function(a){var b=new window.ActiveXObject(\"htmlfile\");return b.designMode=\"on\",b.open(),b.write(a),b.close(),b}:a.prototype.parseFromString=function(a){var b=document.implementation.createHTMLDocument(\"\");return b.open(),b.write(a),b.close(),b},a}function n(){var a=!1;try{document.implementation.createHTMLDocument(\"\").open()}catch(b){window.ActiveXObject&&(a=!0)}return a}function o(a){var b;if(\"string\"==typeof a){var e=p().parseFromString('<x-turndown id=\"turndown-root\">'+a+\"</x-turndown>\",\"text/html\");b=e.getElementById(\"turndown-root\")}else b=a.cloneNode(!0);return i({element:b,isBlock:c,isVoid:d}),b}function p(){return F=F||new H}function q(a){return a.isBlock=c(a),a.isCode=\"code\"===a.nodeName.toLowerCase()||a.parentNode.isCode,a.isBlank=r(a),a.flankingWhitespace=s(a),a}function r(a){return-1===[\"A\",\"TH\",\"TD\"].indexOf(a.nodeName)&&/^\\s*$/i.test(a.textContent)&&!d(a)&&!e(a)}function s(a){var b=\"\",c=\"\";if(!a.isBlock){var d=/^[ \\r\\n\\t]/.test(a.textContent),e=/[ \\r\\n\\t]$/.test(a.textContent);d&&!t(\"left\",a)&&(b=\" \"),e&&!t(\"right\",a)&&(c=\" \")}return{leading:b,trailing:c}}function t(a,b){var d,e,f;return\"left\"===a?(d=b.previousSibling,e=/ $/):(d=b.nextSibling,e=/^ /),d&&(3===d.nodeType?f=e.test(d.nodeValue):1!==d.nodeType||c(d)||(f=e.test(d.textContent))),f}function u(b){if(!(this instanceof u))return new u(b);var c={rules:E,headingStyle:\"setext\",hr:\"* * *\",bulletListMarker:\"*\",codeBlockStyle:\"indented\",fence:\"```\",emDelimiter:\"_\",strongDelimiter:\"**\",linkStyle:\"inlined\",linkReferenceStyle:\"full\",br:\"  \",blankReplacement:function(a,b){return b.isBlock?\"\\n\\n\":\"\"},keepReplacement:function(a,b){return b.isBlock?\"\\n\\n\"+b.outerHTML+\"\\n\\n\":b.outerHTML},defaultReplacement:function(a,b){return b.isBlock?\"\\n\\n\"+a+\"\\n\\n\":a}};this.options=a({},c,b),this.rules=new f(this.options)}function v(a){var b=this;return I.call(a.childNodes,function(a,c){c=new q(c);var d=\"\";return 3===c.nodeType?d=c.isCode?c.nodeValue:b.escape(c.nodeValue):1===c.nodeType&&(d=x.call(b,c)),z(a,d)},\"\")}function w(a){var b=this;return this.rules.forEach(function(c){\"function\"==typeof c.append&&(a=z(a,c.append(b.options)))}),a.replace(/^[\\t\\r\\n]+/,\"\").replace(/[\\t\\r\\n\\s]+$/,\"\")}function x(a){var b=this.rules.forNode(a),c=v.call(this,a),d=a.flankingWhitespace;return(d.leading||d.trailing)&&(c=c.trim()),d.leading+b.replacement(c,a,this.options)+d.trailing}function y(a,b){var c=[a.match(K)[0],b.match(J)[0]].sort(),d=c[c.length-1];return d.length<2?d:\"\\n\\n\"}function z(a,b){var c=y(a,b);return a=a.replace(K,\"\"),b=b.replace(J,\"\"),a+c+b}function A(a){return null!=a&&(\"string\"==typeof a||a.nodeType&&(1===a.nodeType||9===a.nodeType||11===a.nodeType))}var B=[\"address\",\"article\",\"aside\",\"audio\",\"blockquote\",\"body\",\"canvas\",\"center\",\"dd\",\"dir\",\"div\",\"dl\",\"dt\",\"fieldset\",\"figcaption\",\"figure\",\"footer\",\"form\",\"frameset\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"header\",\"hgroup\",\"hr\",\"html\",\"isindex\",\"li\",\"main\",\"menu\",\"nav\",\"noframes\",\"noscript\",\"ol\",\"output\",\"p\",\"pre\",\"section\",\"table\",\"tbody\",\"td\",\"tfoot\",\"th\",\"thead\",\"tr\",\"ul\"],C=[\"area\",\"base\",\"br\",\"col\",\"command\",\"embed\",\"hr\",\"img\",\"input\",\"keygen\",\"link\",\"meta\",\"param\",\"source\",\"track\",\"wbr\"],D=C.join(),E={};E.paragraph={filter:\"p\",replacement:function(a){return\"\\n\\n\"+a+\"\\n\\n\"}},E.lineBreak={filter:\"br\",replacement:function(a,b,c){return c.br+\"\\n\"}},E.heading={filter:[\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\"],replacement:function(a,c,d){var e=Number(c.nodeName.charAt(1));if(\"setext\"===d.headingStyle&&3>e){var f=b(1===e?\"=\":\"-\",a.length);return\"\\n\\n\"+a+\"\\n\"+f+\"\\n\\n\"}return\"\\n\\n\"+b(\"#\",e)+\" \"+a+\"\\n\\n\"}},E.blockquote={filter:\"blockquote\",replacement:function(a){return a=a.replace(/^\\n+|\\n+$/g,\"\"),a=a.replace(/^/gm,\"> \"),\"\\n\\n\"+a+\"\\n\\n\"}},E.list={filter:[\"ul\",\"ol\"],replacement:function(a,b){var c=b.parentNode;return\"LI\"===c.nodeName&&c.lastElementChild===b?\"\\n\"+a:\"\\n\\n\"+a+\"\\n\\n\"}},E.listItem={filter:\"li\",replacement:function(a,b,c){a=a.replace(/^\\n+/,\"\").replace(/\\n+$/,\"\\n\").replace(/\\n/gm,\"\\n    \");var d=c.bulletListMarker+\"   \",e=b.parentNode;if(\"OL\"===e.nodeName){var f=e.getAttribute(\"start\"),g=Array.prototype.indexOf.call(e.children,b);d=(f?Number(f)+g:g+1)+\".  \"}return d+a+(b.nextSibling&&!/\\n$/.test(a)?\"\\n\":\"\")}},E.indentedCodeBlock={filter:function(a,b){return\"indented\"===b.codeBlockStyle&&\"PRE\"===a.nodeName&&a.firstChild&&\"CODE\"===a.firstChild.nodeName},replacement:function(a,b,c){return\"\\n\\n    \"+b.firstChild.textContent.replace(/\\n/g,\"\\n    \")+\"\\n\\n\"}},E.fencedCodeBlock={filter:function(a,b){return\"fenced\"===b.codeBlockStyle&&\"PRE\"===a.nodeName&&a.firstChild&&\"CODE\"===a.firstChild.nodeName},replacement:function(a,b,c){var d=b.firstChild.className||\"\",e=(d.match(/language-(\\S+)/)||[null,\"\"])[1];return\"\\n\\n\"+c.fence+e+\"\\n\"+b.firstChild.textContent+\"\\n\"+c.fence+\"\\n\\n\"}},E.horizontalRule={filter:\"hr\",replacement:function(a,b,c){return\"\\n\\n\"+c.hr+\"\\n\\n\"}},E.inlineLink={filter:function(a,b){return\"inlined\"===b.linkStyle&&\"A\"===a.nodeName&&a.getAttribute(\"href\")},replacement:function(a,b){var c=b.getAttribute(\"href\"),d=b.title?' \"'+b.title+'\"':\"\";return\"[\"+a+\"](\"+c+d+\")\"}},E.referenceLink={filter:function(a,b){return\"referenced\"===b.linkStyle&&\"A\"===a.nodeName&&a.getAttribute(\"href\")},replacement:function L(a,b,c){var L,d,e=b.getAttribute(\"href\"),f=b.title?' \"'+b.title+'\"':\"\";switch(c.linkReferenceStyle){case\"collapsed\":L=\"[\"+a+\"][]\",d=\"[\"+a+\"]: \"+e+f;break;case\"shortcut\":L=\"[\"+a+\"]\",d=\"[\"+a+\"]: \"+e+f;break;default:var g=this.references.length+1;L=\"[\"+a+\"][\"+g+\"]\",d=\"[\"+g+\"]: \"+e+f}return this.references.push(d),L},references:[],append:function(a){var b=\"\";return this.references.length&&(b=\"\\n\\n\"+this.references.join(\"\\n\")+\"\\n\\n\",this.references=[]),b}},E.emphasis={filter:[\"em\",\"i\"],replacement:function(a,b,c){return a.trim()?c.emDelimiter+a+c.emDelimiter:\"\"}},E.strong={filter:[\"strong\",\"b\"],replacement:function(a,b,c){return a.trim()?c.strongDelimiter+a+c.strongDelimiter:\"\"}},E.code={filter:function(a){var b=a.previousSibling||a.nextSibling,c=\"PRE\"===a.parentNode.nodeName&&!b;return\"CODE\"===a.nodeName&&!c},replacement:function(a){if(!a.trim())return\"\";var b=\"`\",c=\"\",d=\"\",e=a.match(/`+/gm);if(e)for(/^`/.test(a)&&(c=\" \"),/`$/.test(a)&&(d=\" \");-1!==e.indexOf(b);)b+=\"`\";return b+c+a+d+b}},E.image={filter:\"img\",replacement:function(a,b){var c=b.alt||\"\",d=b.getAttribute(\"src\")||\"\",e=b.title||\"\",f=e?' \"'+e+'\"':\"\";return d?\"![\"+c+\"](\"+d+f+\")\":\"\"}},f.prototype={add:function(a,b){this.array.unshift(b)},keep:function(a){this._keep.unshift({filter:a,replacement:this.keepReplacement})},remove:function(a){this._remove.unshift({filter:a,replacement:function(){return\"\"}})},forNode:function(a){if(a.isBlank)return this.blankRule;var b;return(b=g(this.array,a,this.options))?b:(b=g(this._keep,a,this.options))?b:(b=g(this._remove,a,this.options))?b:this.defaultRule},forEach:function(a){for(var b=0;b<this.array.length;b++)a(this.array[b],b)}};var F,G=\"undefined\"!=typeof window?window:{},H=l()?G.DOMParser:m(),I=Array.prototype.reduce,J=/^\\n*/,K=/\\n*$/;return u.prototype={turndown:function(a){if(!A(a))throw new TypeError(a+\" is not a string, or an element/document/fragment node.\");if(\"\"===a)return\"\";var b=v.call(this,new o(a));return w.call(this,b)},use:function(a){if(Array.isArray(a))for(var b=0;b<a.length;b++)this.use(a[b]);else{if(\"function\"!=typeof a)throw new TypeError(\"plugin must be a Function or an Array of Functions\");a(this)}return this},addRule:function(a,b){return this.rules.add(a,b),this},keep:function(a){return this.rules.keep(a),this},remove:function(a){return this.rules.remove(a),this},escape:function(a){return a.replace(/\\\\(\\S)/g,\"\\\\\\\\$1\").replace(/^(#{1,6} )/gm,\"\\\\$1\").replace(/^([-*_] *){3,}$/gm,function(a,b){return a.split(b).join(\"\\\\\"+b)}).replace(/^(\\W* {0,3})(\\d+)\\. /gm,\"$1$2\\\\. \").replace(/^([^\\\\\\w]*)[*+-] /gm,function(a){return a.replace(/([*+-])/g,\"\\\\$1\")}).replace(/^(\\W* {0,3})> /gm,\"$1\\\\> \").replace(/\\*+(?![*\\s\\W]).+?\\*+/g,function(a){return a.replace(/\\*/g,\"\\\\*\")}).replace(/_+(?![_\\s\\W]).+?_+/g,function(a){return a.replace(/_/g,\"\\\\_\")}).replace(/`+(?![`\\s\\W]).+?`+/g,function(a){return a.replace(/`/g,\"\\\\`\")}).replace(/[\\[\\]]/g,\"\\\\$&\")}},u}();!function(a,b){function c(a,c,d){var e=\" to exec \"+c+\" command\"+(d?\" with value: \"+d:\"\");try{b.execCommand(c,!1,d)}catch(f){return B.log(\"fail\"+e,!0)}B.log(\"success\"+e)}function d(a,b,d){var e=q(a);if(e)return a._range.selectNode(e),a._range.collapse(!1),\"insertimage\"===b&&a._menu&&w(a._menu,!0),c(a,b,d)}function e(a,b){var d=r(a,q(a),!0);return-1!==d.indexOf(b)&&(b=\"p\"),c(a,\"formatblock\",b)}function f(a,b,d){return d=\"<\"+b+\">\"+(d||A.toString())+\"</\"+b+\">\",c(a,\"insertHTML\",d)}function g(a,b,d){return a.config.linksInNewWindow?(d='<a href=\"'+d+'\" target=\"_blank\">'+A.toString()+\"</a>\",c(a,\"insertHTML\",d)):c(a,b,d)}function h(a){var c=\"\",d='<input class=\"pen-input\" placeholder=\"http://\" />';if(a._toolbar=a.config.toolbar,a._toolbar)(a._toolbar.querySelectorAll(\"[data-action=createlink]\").length||a._toolbar.querySelectorAll(\"[data-action=insertimage]\").length)&&(c+=d);else{var e=a.config.list;B.forEach(e,function(b){var d=\"pen-icon icon-\"+b,e=a.config.titles[b]||\"\";c+='<i class=\"'+d+'\" data-action=\"'+b+'\" title=\"'+e+'\"></i>'},!0),(e.indexOf(\"createlink\")>=0||e.indexOf(\"insertimage\")>=0)&&(c+=d)}c&&(a._menu=b.createElement(\"div\"),a._menu.setAttribute(\"class\",a.config[\"class\"]+\"-menu pen-menu\"),a._menu.innerHTML=c,a._inputBar=a._menu.querySelector(\"input\"),w(a._menu,!0),b.body.appendChild(a._menu)),a._toolbar&&a._inputBar&&w(a._inputBar)}function i(c){function d(a){c._range=c.getRange(),g(a)}var e=c._toolbar||c._menu,f=c.config.editor,g=B.delayExec(function(){c.highlight().menu()}),h=function(){};if(c._menu){var i=function(){\"block\"===c._menu.style.display&&c.menu()};j(c,a,\"resize\",i),j(c,a,\"scroll\",i);var k=!1;j(c,f,\"mousedown\",function(){k=!0}),j(c,f,\"mouseleave\",function(){k&&d(800),k=!1}),j(c,f,\"mouseup\",function(){k&&d(100),k=!1}),h=function(a){!c._menu||\"block\"!==c._menu.style.display||p(f,a.target)||p(c._menu,a.target)||(l(c,b,\"click\",h),g(100))}}else j(c,f,\"click\",function(){d(0)});j(c,f,\"keyup\",function(a){return 8===a.which&&c.isEmpty()?s(c,!0):void 0}),j(c,f,\"keydown\",function(a){if(f.classList.remove(\"pen-placeholder\"),13===a.which&&!a.shiftKey){var d=q(c,!0);if(d&&F.test(d.nodeName)){\"CODE\"===d.nodeName&&(d=d.parentNode),a.preventDefault();var e=b.createElement(\"p\");e.innerHTML=\"<br>\",d.nextSibling?d.parentNode.insertBefore(e,d.nextSibling):d.parentNode.appendChild(e),t(c,e,c.getRange())}}});var m=function(a,b){c.execCommand(a,b),c._range=c.getRange(),c.highlight().menu()};j(c,e,\"click\",function(a){for(var b=a.target,d=void 0;b!==e&&!(d=b.getAttribute(\"data-action\"));)b=b.parentNode;if(d){if(!/(?:createlink)|(?:insertimage)/.test(d))return m(d);if(c._inputBar){var f=c._inputBar;if(e===c._menu?w(f):(c._inputActive=!0,c.menu()),\"none\"!==c._menu.style.display){setTimeout(function(){f.focus()},400);var g=function(){var a=f.value;a?a=f.value.replace(H.whiteSpace,\"\").replace(H.mailTo,\"mailto:$1\").replace(H.http,\"http://$1\"):d=\"unlink\",m(d,a),e===c._menu?w(f,!1):w(c._menu,!0)};f.onkeypress=function(a){return 13===a.which?g():void 0}}}}}),j(c,f,\"focus\",function(){c.isEmpty()&&s(c,!0),j(c,b,\"click\",h)}),j(c,f,\"blur\",function(){n(c),c.checkContentChange()}),j(c,f,\"paste\",function(){setTimeout(function(){c.cleanContent()})})}function j(a,b,c,d){if(a._events.hasOwnProperty(c))a._events[c].push(d);else{a._eventTargets=a._eventTargets||[],a._eventsCache=a._eventsCache||[];var e=a._eventTargets.indexOf(b);0>e&&(e=a._eventTargets.push(b)-1),a._eventsCache[e]=a._eventsCache[e]||{},a._eventsCache[e][c]=a._eventsCache[e][c]||[],a._eventsCache[e][c].push(d),b.addEventListener(c,d,!1)}return a}function k(a,b){if(a._events.hasOwnProperty(b)){var c=D.call(arguments,2);B.forEach(a._events[b],function(b){b.apply(a,c)})}}function l(a,b,c,d){var e=a._events[c];if(!e){var f=a._eventTargets.indexOf(b);f>=0&&(e=a._eventsCache[f][c])}if(!e)return a;var g=e.indexOf(d);return g>=0&&e.splice(g,1),b.removeEventListener(c,d,!1),a}function m(a){return B.forEach(this._events,function(a){a.length=0},!1),a._eventsCache?(B.forEach(a._eventsCache,function(b,c){var d=a._eventTargets[c];B.forEach(b,function(a,b){B.forEach(a,function(a){d.removeEventListener(b,a,!1)},!0)},!1)},!0),a._eventTargets=[],a._eventsCache=[],a):a}function n(a){a.config.editor.classList[a.isEmpty()?\"add\":\"remove\"](\"pen-placeholder\")}function o(a){return(a||\"\").replace(/^\\s+|\\s+$/g,\"\")}function p(a,b){if(a===b)return!0;for(b=b.parentNode;b;){if(b===a)return!0;b=b.parentNode}return!1}function q(a,b){var c=void 0,d=a.config.editor;if(a._range=a.getRange(),c=a._range.commonAncestorContainer,!c||c===d)return null;for(;c&&1!==c.nodeType&&c.parentNode!==d;)c=c.parentNode;if(b)for(;c&&c.parentNode!==d;)c=c.parentNode;return p(d,c)?c:null}function r(a,b,c){var d=[];for(b=b||a.config.editor;b&&b!==a.config.editor;)b.nodeName.match(G)&&d.push(c?b.nodeName.toLowerCase():b),b=b.parentNode;return d}function s(a,c){var d=a._range=a.getRange(),e=b.createElement(\"p\");c&&(a.config.editor.innerHTML=\"\"),e.innerHTML=\"<br>\",d.insertNode(e),t(a,e.childNodes[0],d)}function t(a,b,c){c.setStartAfter(b),c.setEndBefore(b),c.collapse(!1),a.setRange(c)}function u(a){if(1===a.nodeType){if(I.notLink.test(a.tagName))return;B.forEach(a.childNodes,function(a){u(a)},!0)}else if(3===a.nodeType){var c=v(a.nodeValue||\"\");if(!c.links)return;var d=b.createDocumentFragment(),e=b.createElement(\"div\");for(e.innerHTML=c.text;e.childNodes.length;)d.appendChild(e.childNodes[0]);a.parentNode.replaceChild(d,a)}}function v(a){var b=0;return a=a.replace(I.url,function(a){var c=a,d=a;return b++,a.length>I.maxLength&&(d=a.slice(0,I.maxLength)+\"...\"),I.prefix.test(c)||(c=\"http://\"+c),'<a href=\"'+c+'\">'+d+\"</a>\"}),{links:b,text:a}}function w(a,b){a.style.display=b?\"none\":\"block\"}function x(a){if(a.hasChildNodes())return a.firstChild;for(;a&&!a.nextSibling;)a=a.parentNode;return a?a.nextSibling:null}function y(a){var b=a.startContainer,c=a.endContainer;if(b===c)return[b];for(var d=[];b&&b!==c;)d.push(b=x(b));for(b=a.startContainer;b&&b!==a.commonAncestorContainer;)d.unshift(b),b=b.parentNode;return d}var z=void 0,A=void 0,B={},C=Object.prototype.toString,D=Array.prototype.slice,E={block:/^(?:p|h[1-6]|blockquote)$/,inline:/^(?:bold|italic|underline|insertorderedlist|insertunorderedlist|indent|outdent)$/,source:/^(?:createlink|unlink)$/,insert:/^(?:inserthorizontalrule|insertimage|insert)$/,wrap:/^(?:code)$/},F=/^(?:blockquote|pre|div|code)$/i,G=/(?:[pubia]|h[1-6]|blockquote|[uo]l|li|code)/i,H={whiteSpace:/(^\\s+)|(\\s+$)/g,mailTo:/^(?!mailto:|.+\\/|.+#|.+\\?)(.*@.*\\..+)$/,http:/^(?!\\w+?:\\/\\/|mailto:|\\/|\\.\\/|\\?|#)(.*)$/},I={url:/((https?|ftp):\\/\\/|www\\.)[^\\s<]{3,}/gi,prefix:/^(?:https?|ftp):\\/\\//i,notLink:/^(?:img|a|input|audio|video|source|code|pre|script|head|title|style)$/i,maxLength:100};B.is=function(a,b){return C.call(a).slice(8,-1)===b},B.forEach=function(a,b,c){if(a)if(null==c&&(c=B.is(a,\"Array\")),c)for(var d=0,e=a.length;e>d;d++)b(a[d],d,a);else for(var f in a)a.hasOwnProperty(f)&&b(a[f],f,a)},B.copy=function(a,b){return B.forEach(b,function(b,c){B.is(b,\"Object\")?a[c]=B.copy({},b):B.is(b,\"Array\")?a[c]=B.copy([],b):a[c]=b}),a},B.log=function(a,b){(z||b)&&console.log(\"%cPEN DEBUGGER: %c\"+a,\"font-family:arial,sans-serif;color:#1abf89;line-height:2em;\",\"font-family:cursor,monospace;color:#333;\")},B.delayExec=function(a){var b=null;return function(c){clearTimeout(b),b=setTimeout(function(){a()},c||1)}},B.merge=function(a){var c={\"class\":\"pen\",debug:!1,toolbar:null,stay:a.stay||!a.debug,stayMsg:\"Are you going to leave here?\",textarea:'<textarea name=\"content\"></textarea>',list:[\"blockquote\",\"h2\",\"h3\",\"p\",\"code\",\"insertorderedlist\",\"insertunorderedlist\",\"inserthorizontalrule\",\"indent\",\"outdent\",\"bold\",\"italic\",\"underline\",\"createlink\",\"insertimage\"],titles:{},cleanAttrs:[\"id\",\"class\",\"style\",\"name\"],cleanTags:[\"script\"],linksInNewWindow:!1};return 1===a.nodeType?c.editor=a:a.match&&a.match(/^#[\\S]+$/)?c.editor=b.getElementById(a.slice(1)):c=B.copy(c,a),c};var J=function(a){if(!a)throw new Error(\"Can't find config\");z=a.debug;var b=B.merge(a),c=b.editor;if(!c||1!==c.nodeType)throw new Error(\"Can't find editor\");c.classList.add(b[\"class\"]),c.setAttribute(\"contenteditable\",\"true\"),this.config=b,b.placeholder&&c.setAttribute(\"data-placeholder\",b.placeholder),n(this),this.selection=A,this._events={change:[]},h(this),i(this),this._prevContent=this.getContent(),this.markdown&&this.markdown.init(this),this.config.stay&&this.stay(this.config),this.config.input&&this.addOnSubmitListener(this.config.input)};J.prototype.on=function(a,b){return j(this,this.config.editor,a,b),this},J.prototype.addOnSubmitListener=function(a){var b=a.form,c=this;b.addEventListener(\"submit\",function(){a.value=c.config.editor.innerHTML})},J.prototype.isEmpty=function(a){return a=a||this.config.editor,!(a.querySelector(\"img\")||a.querySelector(\"blockquote\")||a.querySelector(\"li\")||o(a.textContent))},J.prototype.getContent=function(){return this.isEmpty()?\"\":o(this.config.editor.innerHTML)},J.prototype.setContent=function(a){return this.config.editor.innerHTML=a,this.cleanContent(),this},J.prototype.checkContentChange=function(){var a=this._prevContent,b=this.getContent();a!==b&&(this._prevContent=b,k(this,\"change\",b,a))},J.prototype.getRange=function(){var a=this.config.editor,c=A.rangeCount&&A.getRangeAt(0);return c||(c=b.createRange()),p(a,c.commonAncestorContainer)||(c.selectNodeContents(a),c.collapse(!1)),c},J.prototype.setRange=function(a){a=a||this._range,a||(a=this.getRange(),a.collapse(!1));try{A.removeAllRanges(),A.addRange(a)}catch(b){}return this},J.prototype.focus=function(a){return a||this.setRange(),this.config.editor.focus(),this},J.prototype.execCommand=function(a,h){if(a=a.toLowerCase(),\"codeblock\"===a)this.selection.focusNode.innerHTML=\"<code><br></code>\",e(this,\"pre\");else if(E.block.test(a))e(this,a);else if(E.inline.test(a))c(this,a,h);else if(E.source.test(a))this.setRange(),g(this,a,h);else if(E.insert.test(a))this.setRange(),d(this,a,h);else if(E.wrap.test(a)){var i=y(this.selection.getRangeAt(0)),j=0;if(B.forEach(i,function(a){\"P\"===a.nodeName&&j++}),2>j){var k=r(this,this.selection.focusNode),l=void 0;if(B.forEach(k,function(a){\"CODE\"===a.nodeName&&(l=a)}),l){if(!c(this,\"removeFormat\")){var m=b.createDocumentFragment();B.forEach(l.childNodes,function(a){m.appendChild(a.cloneNode())}),l.replaceWith(m)}}else f(this,a,h)}}else B.log(\"can not find command function for name: \"+a+(h?\", value: \"+h:\"\"),!0);\"indent\"===a?this.checkContentChange():this.cleanContent({cleanAttrs:[\"style\"]})},J.prototype.cleanContent=function(a){var b=this.config.editor;return a||(a=this.config),B.forEach(a.cleanAttrs,function(a){B.forEach(b.querySelectorAll(\"[\"+a+\"]\"),function(b){b.removeAttribute(a)},!0)},!0),B.forEach(a.cleanTags,function(a){B.forEach(b.querySelectorAll(a),function(a){a.parentNode.removeChild(a)},!0)},!0),n(this),this.checkContentChange(),this},J.prototype.autoLink=function(){return u(this.config.editor),this.getContent()},J.prototype.highlight=function(){var a=this._toolbar||this._menu,b=q(this);if(B.forEach(a.querySelectorAll(\".active\"),function(a){a.classList.remove(\"active\")},!0),!b)return this;var c=r(this,b),d=this._inputBar;d&&a===this._menu&&(d.style.display=\"none\",d.value=\"\");var e=function(b){if(b){var c=a.querySelector(\"[data-action=\"+b+\"]\");return c&&c.classList.add(\"active\")}};return B.forEach(c,function(a){var b=a.nodeName.toLowerCase();switch(b){case\"a\":d&&(d.value=a.getAttribute(\"href\")),b=\"createlink\";break;case\"img\":d&&(d.value=a.getAttribute(\"src\")),b=\"insertimage\";break;case\"i\":b=\"italic\";break;case\"u\":b=\"underline\";break;case\"b\":b=\"bold\";break;case\"pre\":case\"code\":b=\"code\";break;case\"ul\":b=\"insertunorderedlist\";break;case\"ol\":b=\"insertorderedlist\";break;case\"li\":b=\"indent\"}e(b)},!0),this},J.prototype.menu=function(){if(!this._menu)return this;if(A.isCollapsed)return this._menu.style.display=\"none\",this._inputActive=!1,this;if(this._toolbar&&(!this._inputBar||!this._inputActive))return this;var a=this._range.getBoundingClientRect(),b=10,c=a.top-b,d=a.left+a.width/2,e=this._menu,f={x:0,y:0},g=this._stylesheet;if(0===a.width&&0===a.height)return this;if(void 0===this._stylesheet){var h=document.createElement(\"style\");document.head.appendChild(h),this._stylesheet=g=h.sheet}return e.style.display=\"block\",f.x=d-e.clientWidth/2,f.y=c-e.clientHeight,g.cssRules.length>0&&g.deleteRule(0),f.x<0?(f.x=0,g.insertRule(\".pen-menu:after {left: \"+d+\"px;}\",0)):g.insertRule(\".pen-menu:after {left: 50%; }\",0),f.y<0?(e.classList.add(\"pen-menu-below\"),f.y=a.top+a.height+b):e.classList.remove(\"pen-menu-below\"),e.style.top=f.y+\"px\",e.style.left=f.x+\"px\",this},J.prototype.stay=function(a){var b=this;window.onbeforeunload||(window.onbeforeunload=function(){return b._isDestroyed?void 0:a.stayMsg})},J.prototype.destroy=function(a){var b=!a,c=a?\"setAttribute\":\"removeAttribute\";if(a)h(this),i(this);else{m(this);try{A.removeAllRanges(),this._menu&&this._menu.parentNode.removeChild(this._menu)}catch(d){}}return this._isDestroyed=b,this.config.editor[c](\"contenteditable\",\"\"),this},J.prototype.rebuild=function(){return this.destroy(\"it's a joke\")},a.Pen=function(a){if(!a)return B.log(\"can't find config\",!0);var b=B.merge(a),c=b.editor.getAttribute(\"class\");return c=c?c.replace(/\\bpen\\b/g,\"\")+\" pen-textarea \"+b[\"class\"]:\"pen pen-textarea\",b.editor.setAttribute(\"class\",c),b.editor.innerHTML=b.textarea,b.editor},J.prototype.toMd=function(){var a=this.getContent(),b=new TurndownService({codeBlockStyle:\"fenced\",headingStyle:\"atx\"});return b.turndown(a)},b.getSelection&&(A=b.getSelection(),a.Pen=J)}(window,document);"]}